---
- name: setup containers
  hosts: atomichosts

  vars_files:
    - vault.yml
    - vars.yml

  tasks:
    - name: create all docker volume folders
      file:
        path: "{{ item.path }}"
        owner: "{{ item.owner | default ('root') }}"
        group: "{{ item.group | default ('root') }}"
        mode: "{{ item.mode | default ('0775') }}"
        setype: "{{ item.type | default ('container_file_t') }}"
        state: directory
      with_items: "{{ docker_volumes }}"
      tags: [ mysql, containers, docker, volumes, registry, certbot, frontend, gitlab, postgres, folders, database, perconda ]

